- hosts: localhost
  become: true
  tasks:
    - name: Include vars for distribution
      ansible.builtin.include_vars:
        file: "vars/{{ item }}"
      with_items:
        - global.yml
        - "{{ ansible_distribution }}.yml"

    
    - name: Install required packages
      ansible.builtin.package:
        name: "{{ required_packages }}"
        state: present

    - name: Clone metatrader-setup to /opt/metatrader-setup
      ansible.builtin.git:
        repo: "{{ github_repo }}"
        dest: /opt/metatrader-setup
        update: yes
        force: yes
        clone: yes
    
    - name: Install ansible requirements
      community.general.ansible_galaxy_install:
        requirements_file: /opt/metatrader-setup/requirements.yml
        force: true
        type: both
        dest: /etc/ansible
    